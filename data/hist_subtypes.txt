subtypes = c("micropapillary", "nested", "large_nested", "tubular_microcystic", 
             "plasmacytoid", "sarcomatoid", "lipid_rich", "lymphoepithelioma_like", 
             "clear_cell_glycogene_rich", "giant_cell", "poorly_differentiated")

# Named vector for mapping
subtype_map <- c(
  "micropapillär" = "micropapillary",
  "mikropapillär" = "micropapillary",
  "micropapillär + jättecellsmorfologi" = "micropapillary_giant",
  "micropapillär + skivepitel" = "micropapillary",
  "mikropapillär & nested" = "micropapillary",
  "nested" = "nested",
  "nested variant" = "nested",
  "large_nested" = "large_nested",
  "tubulär och skivepitekdifferentiering" = "tubular_microcystic",
  "tubular_microcystic" = "tubular_microcystic",
  "plasmacytoid" = "plasmacytoid",
  "plasmacytoid + sarkomatoid" = "plasmacytoid",
  "sarkomatoid" = "sarcomatoid",
  "sarcomatoid" = "sarcomatoid",
  "lipid_rich" = "lipid_rich",
  "lymphoepithelioma_like" = "lymphoepithelioma_like",
  "klarcellig differentiering" = "clear_cell_glycogene_rich",
  "clear_cell_glycogene_rich" = "clear_cell_glycogene_rich",
  "giant_cell" = "giant_cell",
  "pleomorphic giant cell carcinoma" = "giant_cell",
  "poorly_differentiated" = "poorly_differentiated",
  "neuroendokrin" = "poorly_differentiated",
  "neuroendokrin differentiering" = "poorly_differentiated",
  "storcelllig" = "poorly_differentiated",
  "småcellig" = "poorly_differentiated",
  "adenodifferntiering" = "poorly_differentiated",
  "glandulär differentiering" = "poorly_differentiated",
  "glandulärdifferentiering" = "poorly_differentiated",
  "körteldifferentiering" = "poorly_differentiated",
  "mucinös och signetringcellsdifferentiering" = "poorly_differentiated",
  "signetringscellkomponent + rhabdoid komponent" = "poorly_differentiated",
  "flera inkl. småcellig variant" = "poorly_differentiated",
  "skivepitelcancer" = "poorly_differentiated",
  "skivepiteldiff" = "poorly_differentiated",
  "skivepiteldifferentiering" = "poorly_differentiated",
  "skivepitelmetaplasi" = "poorly_differentiated",
  "nej" = NA,
  "n" = NA,
  "none" = "none",
  "j" = NA,
  "m" = NA
)